{"version":3,"file":"static/webpack/static\\development\\pages\\Login.js.c9c4e93f4bca24f65d7f.hot-update.js","sources":["webpack:///./config/actions/UserActions.js"],"sourcesContent":["import { actionTypes, FACEBOOK_PROFILE_PIC_URL } from \"../types\";\r\nimport Router from \"next/router\";\r\nimport Axios from \"axios\";\r\nexport const mudaNome = texto => {\r\n  return {\r\n    type: actionTypes.MUDA_NOME,\r\n    payload: texto\r\n  };\r\n};\r\n\r\nexport const mudaEmail = texto => {\r\n  return {\r\n    type: actionTypes.MUDA_EMAIL,\r\n    payload: texto\r\n  };\r\n};\r\n\r\nexport const mudaSenha = texto => {\r\n  return {\r\n    type: actionTypes.MUDA_SENHA,\r\n    payload: texto\r\n  };\r\n};\r\n\r\nexport const cadastrar = data => {\r\n  return dispatch => {\r\n    Axios.post(`${actionTypes.URL}signin`, data)\r\n      .then(res => {\r\n        console.log(res);\r\n        if (res.data) {\r\n          dispatch(cadastroSucesso());\r\n        } else {\r\n        }\r\n      })\r\n      .catch(erro => {\r\n        console.log(erro.response.data);\r\n        dispatch(cadastroErro(erro));\r\n      });\r\n  };\r\n};\r\n\r\nconst cadastroSucesso = () => {\r\n  return {\r\n    type: actionTypes.CADASTRADO_SUCESSO,\r\n    payload: true\r\n  };\r\n};\r\n\r\nconst cadastroErro = erro => {\r\n  return {\r\n    type: actionTypes.CADASTRADO_ERRO,\r\n    payload: erro.response.data\r\n  };\r\n};\r\n\r\nexport const entrar = data => {\r\n  return dispatch => {\r\n    Axios.post(`${actionTypes.URL}login`, data)\r\n      .then(res => {\r\n        console.log(res);\r\n        if (res.data) {\r\n          localStorage.setItem(\"authToken\", res.data.token);\r\n\r\n          Axios.defaults.headers.common[\"Authorization\"] = `bearer ${\r\n            res.data.token\r\n          }`;\r\n\r\n          dispatch(loginSucesso());\r\n        } else {\r\n        }\r\n      })\r\n      .catch(erro => {\r\n        console.log(erro);\r\n        dispatch(loginErro(erro));\r\n      });\r\n  };\r\n};\r\n\r\nconst loginSucesso = () => {\r\n  return {\r\n    type: actionTypes.LOGIN_SUCESSO,\r\n    payload: true\r\n  };\r\n};\r\n\r\nconst loginErro = erro => {\r\n  return {\r\n    type: actionTypes.LOGIN_ERRO,\r\n    payload: erro.response.data\r\n  };\r\n};\r\n\r\nexport const loginWithFacebook = () => {\r\n  return dispatch => {\r\n    FB.login(\r\n      function(response) {\r\n        if (response.authResponse) {\r\n          var url = \"/me?fields=name,email\";\r\n\r\n          FB.api(url, function(response) {\r\n            console.log(\"Facebook\", response);\r\n            const data = {\r\n              nome: response.name,\r\n              email: response.email,\r\n              foto: FACEBOOK_PROFILE_PIC_URL(response.id)\r\n            };\r\n\r\n            dispatch(loginFacebookSucesso());\r\n\r\n            Axios.post(`${actionTypes.URL}signin-with-facebook`, data)\r\n              .then(res => {\r\n                localStorage.setItem(\"authToken\", res.data.token);\r\n\r\n                Axios.defaults.headers.common[\"Authorization\"] = `bearer ${\r\n                  res.data.token\r\n                }`; // for all requests\r\n\r\n                Router.push(\"/\");\r\n              })\r\n              .catch(err => {\r\n                console.log(err);\r\n              });\r\n          });\r\n        } else {\r\n          console.log(\"User cancelled login or did not fully authorize.\");\r\n        }\r\n      },\r\n      { scope: \"email\" }\r\n    );\r\n  };\r\n};\r\n\r\nconst loginFacebookSucesso = () => {\r\n  return {\r\n    type: \"face\"\r\n  };\r\n};\r\n"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AAEA;AACA;AACA;AACA;AAFA;AAIA;AAEA;AACA;AACA;AACA;AAFA;AAIA;AAEA;AACA;AACA;AAEA;AACA;AAAA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AAEA;AACA;AAAA;AACA;AAEA;AAIA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AACA;AAFA;AAIA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAHA;AAMA;AAEA;AAEA;AAEA;AACA;AAGA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;;;;A","sourceRoot":""}